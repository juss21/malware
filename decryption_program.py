from functions import *

def decrypt(key, data):
    try:
        decrypted_data = aes_operation(base64.b64decode(key.encode('utf-8')), data, 'dec')
        return decrypted_data
    except:
        print("Wrong code buddy.")
        main()

def main():
        key = input(f"Enter encryption code: ")
        files = find_files()

        for file in files:
            with open(file, "rb") as f:
                data = f.read()
            decrypted_data = decrypt(key, data)
            with open(file, "wb") as f:
                f.write(decrypted_data)
        os.remove(info_file)
        os._exit(1)

if __name__ == "__main__":
    main()